(this.webpackJsonptakeoff_stuff_issue=this.webpackJsonptakeoff_stuff_issue||[]).push([[0],{29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),o=n.n(a),s=n(13),i=n.n(s),r=(n(29),n(12)),j=n(3),l=n(5),u=o.a.createContext(null);function b(){return Object(a.useContext)(u)}function d(){var e=Object(j.g)(),t=(Object(j.h)(),b()),n=Object(a.useState)(""),o=Object(l.a)(n,2),s=o[0],i=o[1],r=Object(a.useState)(""),u=Object(l.a)(r,2),d=u[0],O=u[1];return Object(c.jsxs)("div",{className:"login-form",children:[Object(c.jsx)("h3",{className:"login-text",children:"Authentication"}),Object(c.jsxs)("form",{action:"#",children:[Object(c.jsx)("label",{children:Object(c.jsx)("input",{name:"login",value:s,onChange:function(e){return i(e.target.value)},id:"login",type:"text",placeholder:"Login",required:!0})}),Object(c.jsx)("label",{children:Object(c.jsx)("input",{name:"password",value:d,onChange:function(e){return O(e.target.value)},id:"password",type:"password",placeholder:"Password",required:!0})}),Object(c.jsxs)("div",{className:"login-controls",children:[Object(c.jsx)("button",{name:"submit",type:"submit",onClick:function(n){n.preventDefault(),""!==s&&""!==d&&t.signin({login:s,password:d}).then((function(){e.replace({pathname:"/contacts"})}))},children:"submit"}),Object(c.jsx)("button",{name:"reset",type:"reset",onClick:function(){i(""),O("")},children:"reset"})]})]})]})}var O=n(20),f=n(2);function h(e){return Object(c.jsx)("button",{onClick:e.onClick,children:e.text})}function x(e){var t=e.contact,n=e.onEdit,a=e.onDelete;return Object(c.jsx)("div",{className:"contact",children:t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"contact-info",children:[Object(c.jsx)("span",{className:"contact-info-row",children:t.name}),Object(c.jsx)("span",{className:"contact-info-row",children:t.email}),Object(c.jsx)("span",{className:"contact-info-row",children:t.phone}),Object(c.jsx)("span",{className:"contact-info-row",children:t.website})]}),Object(c.jsxs)("div",{className:"contact-controls",children:[Object(c.jsx)(h,{text:"edit",onClick:function(e){return n(e,t)}}),Object(c.jsx)(h,{text:"delete",onClick:function(e){return a(e,t)}})]})]}):Object(c.jsx)("div",{className:"contact-info",children:Object(c.jsx)("span",{className:"contact-info-row",children:"There is no matched entries"})})})}function m(e){return Object(c.jsx)("div",{className:"contact-list",children:e.contacts.length?e.contacts.map((function(t){return Object(c.jsx)(x,{contact:t,onEdit:e.onEdit,onDelete:e.onDelete},t.id)})):Object(c.jsx)(x,{contact:null})})}function p(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){o(!0)}),[n]),Object(c.jsx)("div",{className:n?"overlay show":"overlay"})}var v=n(15);function E(e){var t=e.contact,n=e.onEdit,a=function(e){n(Object(f.a)(Object(f.a)({},t),{},Object(v.a)({},e.target.name,e.target.value)))};return Object(c.jsxs)("form",{id:"add-contact-form",children:[Object(c.jsx)("label",{children:Object(c.jsx)("input",{type:"text",value:t.name||"",onChange:a,name:"name",placeholder:"Name",required:!0})}),Object(c.jsx)("label",{children:Object(c.jsx)("input",{type:"text",value:t.email||"",onChange:a,name:"email",placeholder:"Email",required:!0})}),Object(c.jsx)("label",{children:Object(c.jsx)("input",{type:"text",value:t.phone||"",onChange:a,name:"phone",placeholder:"Phone",required:!0})}),Object(c.jsx)("label",{children:Object(c.jsx)("input",{type:"text",value:t.website||"",onChange:a,name:"website",placeholder:"Website",required:!0})})]})}function g(e){var t=Object(a.useState)(Object(f.a)({},e.contact)),n=Object(l.a)(t,2),o=n[0],s=n[1],r=Object(a.useState)(!1),j=Object(l.a)(r,2),u=j[0],b=j[1];return Object(a.useEffect)((function(){function t(t){"Escape"===t.key&&e.onClose()}return b(!0),document.body.addEventListener("keyup",t),function(){document.body.removeEventListener("keyup",t)}}),[u,e]),i.a.createPortal(Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:e.contact?"modal show":"modal confirm-modal show",children:[Object(c.jsx)("h3",{className:"modal-text",children:e.title}),e.contact&&Object(c.jsx)(E,{contact:o,onEdit:function(e){s(e)}}),Object(c.jsxs)("div",{className:"modal-controls",children:[Object(c.jsx)(h,{text:e.confirmText,onClick:e.contact?function(){e.onConfirm(Object(f.a)(Object(f.a)({},o),{},{id:o.id||Date.now()}))}:e.onConfirm}),Object(c.jsx)(h,{text:e.cancelText,onClick:e.onClose})]})]}),Object(c.jsx)(p,{})]}),document.body)}function C(e){return Object(c.jsx)("label",{className:"contacts-search",children:Object(c.jsx)("input",{name:"search",onChange:function(t){return e.onChange(t.target.value)},type:"text",placeholder:"Search by name"})})}function D(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)([]),i=Object(l.a)(s,2),r=i[0],j=i[1],u=Object(a.useState)(null),b=Object(l.a)(u,2),d=b[0],x=b[1],p=Object(a.useState)(""),v=Object(l.a)(p,2),E=v[0],D=v[1],w=Object(a.useState)({ADD:!1,DELETE:!1,EDIT:!1}),N=Object(l.a)(w,2),y=N[0],T=N[1],k=Object(a.useState)(!1),S=Object(l.a)(k,2),A=S[0],L=S[1];function q(){T({ADD:!1,DELETE:!1,EDIT:!1})}return Object(a.useEffect)((function(){fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()})).then((function(e){L(!0),o(e)})).catch((function(e){return console.error("Fetch error",e)}))}),[A]),Object(a.useEffect)((function(){j(n.filter((function(e){return-1!==e.name.search(new RegExp(E,"gi"))})))}),[n,E]),Object(c.jsxs)("div",{className:"contacts",children:[Object(c.jsxs)("div",{className:"contact-list-controls",children:[Object(c.jsx)(C,{onChange:function(e){D(e)}}),Object(c.jsx)(h,{text:"Add contact",onClick:function(){T(Object(f.a)(Object(f.a)({},y),{},{ADD:!0}))}})]}),Object(c.jsx)(m,{contacts:r,onEdit:function(e,t){T(Object(f.a)(Object(f.a)({},y),{},{EDIT:!0})),x(t)},onDelete:function(e,t){T(Object(f.a)(Object(f.a)({},y),{},{DELETE:!0})),x(t)}}),y.DELETE&&Object(c.jsx)(g,{title:"Are you sure?",confirmText:"confirm",cancelText:"cancel",onConfirm:function(){T(Object(f.a)(Object(f.a)({},y),{},{DELETE:!1})),o(n.filter((function(e){return e!==d})))},onClose:q}),y.EDIT&&Object(c.jsx)(g,{title:"Edit contact",confirmText:"edit",cancelText:"cancel",onConfirm:function(e){T(Object(f.a)(Object(f.a)({},y),{},{EDIT:!1}));var t=Object(O.a)(n);t[n.indexOf(d)]=e,o(t)},onClose:q,contact:d}),y.ADD&&Object(c.jsx)(g,{title:"Add new contact",confirmText:"add",cancelText:"cancel",onConfirm:function(e){T(Object(f.a)(Object(f.a)({},y),{},{ADD:!1}));var t=[e].concat(Object(O.a)(n));o(t)},onClose:q,contact:{}})]})}function w(e){var t=e.children,n=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];return{user:n,signin:function(e){return new Promise((function(t){setTimeout((function(){c(e),console.log("authorized",e),t()}),500)}))},signout:function(){return new Promise((function(e){setTimeout((function(){c(null),console.log("unauthorized"),e()}),500)}))}}}();return Object(c.jsx)(u.Provider,{value:n,children:t})}var N=n(23);function y(e){var t=e.children,n=Object(N.a)(e,["children"]),a=b();return console.log(n,a,a.user),Object(c.jsx)(j.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){var n=e.location;return a.user?t:Object(c.jsx)(j.a,{to:{pathname:"/",state:{from:n}}})}}))}var T=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(w,{children:Object(c.jsx)(r.a,{children:Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/",children:Object(c.jsx)(d,{})}),Object(c.jsx)(y,{path:"/contacts",children:Object(c.jsx)(D,{})})]})})})})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.a7e981b9.chunk.js.map